<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Food Update</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
    background:#0f172a;
    min-height:100vh;
    font-family:'Segoe UI';
}

.navbar-custom{
    background: linear-gradient(90deg,#0891b2,#06b6d4);
    box-shadow:0 4px 14px rgba(0,0,0,.35);
}

.wrapper{
    width: 850px;
    max-width:95%;
    background:#ffffff;
    border-radius:18px;
    padding:25px 35px;
    margin:25px auto;
    box-shadow:0 20px 60px rgba(0,0,0,.35);
}

.section-title{
    font-size:13px;
    font-weight:700;
    color:#475569;
    margin-bottom:6px;
}

.form-control,.form-select{
    border-radius:10px;
    font-size:14px;
}

.btn-primary{
    border-radius:12px;
    font-weight:600;
    background:#334155;
    border:none;
}

.btn-primary:hover{
    background:#1e293b;
}

.btn-danger{
    border-radius:12px;
}

img{
    border-radius:10px;
}

</style>
</head>

<body>

<nav class="navbar-custom d-flex justify-content-between align-items-center px-5 py-3">
    <h4 class="text-white fw-bold m-0">üçî UPDATE FOOD</h4>

    <a href="/food" class="btn btn-dark fw-bold">
        Back
    </a>
</nav>


<div class="wrapper">

    <div th:if="${res}" class="alert alert-success text-center fw-bold">
        <span th:text="${res}"></span>
    </div>

    <form method="post" th:object="${dto}" action="/food_update" enctype="multipart/form-data">

        <div class="row mb-3">
            <div class="col-md-6">
                <label class="section-title">FOOD ID</label>
                <div class="input-group">
                    <input type="text" th:field="*{food_id}" class="form-control">
                    <button class="btn btn-secondary"
                            formaction="/food_search"
                            formmethod="post">
                        Search
                    </button>
                </div>
            </div>

            <div class="col-md-6">
                <label class="section-title">ADMIN</label>
                <select th:field="*{emp_id}" class="form-select">
                    <option value="">-- Select Admin --</option>
                    <option th:each="a : ${admins}"
                            th:value="${a.emp_id}"
                            th:text="${a.emp_name}">
                    </option>
                </select>
            </div>
        </div>


        <div class="row mb-3">

            <div class="col-md-6">
                <label class="section-title">FOOD NAME</label>
                <input type="text" th:field="*{food_name}" class="form-control">
            </div>

            <div class="col-md-3">
                <label class="section-title">PRICE</label>
                <input type="number" th:field="*{food_price}" class="form-control">
            </div>

            <div class="col-md-3">
                <label class="section-title">STOCK</label>
                <input type="number" th:field="*{food_stock}" class="form-control">
            </div>

        </div>


        <div class="row mb-3">

            <div class="col-md-6">
                <label class="section-title">CURRENT IMAGE</label>
                <img th:if="${dto.food_image != null}"
                     th:src="@{'/uploads/food/' + ${dto.food_image}}"
                     style="max-width:230px;">
            </div>

            <div class="col-md-6">
                <label class="section-title">CHANGE IMAGE</label>
                <input type="file" name="pimageFile" class="form-control"
                       accept="image/*" onchange="previewImage(event)">
                <img id="preview"
                     style="display:none;max-width:230px;margin-top:10px;">
            </div>

        </div>


        <div class="mb-3">
            <label class="section-title">FOOD DETAILS</label>
            <input type="text" th:field="*{food_detail}" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary w-100">
            Update Food
        </button>

        <button type="submit"
                formaction="/food_delete"
                formmethod="post"
                class="btn btn-danger w-100 mt-2">
            Delete
        </button>

    </form>

</div>

<script>
function previewImage(event){
    const img=document.getElementById("preview");
    img.src=URL.createObjectURL(event.target.files[0]);
    img.style.display="block";
}
</script>

</body>
</html>
