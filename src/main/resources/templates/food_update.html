<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Food</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        *{
            box-sizing:border-box;
            margin:0;
            padding:0;
        }

        body{
            background: linear-gradient(135deg,#0f172a,#1e293b);
            min-height:100vh;
            font-family:'Segoe UI', sans-serif;
        }

        .card{
            width:650px;
            max-width:95%;
            margin:40px auto;
            border-radius:18px;
            border:none;
            background:#f8fafc;
        }

        .card-header{
            background:#1e293b;
            color:#f8fafc;
            border-radius:18px 18px 0 0;
        }

        .form-label{
            font-weight:600;
            font-size:14px;
            color:#334155;
        }

        .form-control,
        .form-select{
            border-radius:10px;
            font-size:14px;
            background:#ffffff;
        }

        .btn-primary{
            background:#64748b;
            border:none;
            border-radius:12px;
            font-weight:600;
        }

        .btn-primary:hover{
            background:#475569;
        }

        #preview{
            max-width:200px;
            margin-top:10px;
            border-radius:10px;
            display:none;
        }
    </style>
</head>

<body>
	<div class="card shadow-sm">
		 <div class="card-header text-center py-3"> 
			<h5 class="mb-0">üçî Food Management</h5>
			 <small class="text-light">UPDATE Food</small>
		  </div> <div class="card-body p-4"> <!-- Success Message --> 
			<div th:if="${res}" class="alert alert-success text-center fw-bold mb-3">
				 <span th:text="${res}"></span>
			  </div>
			  
	<form method="post"
	      th:object="${dto}"
	      action="/food_update"
	      enctype="multipart/form-data">

	    <div class="mb-3">
	        <label class="fw-bold">FOOD ID</label>
	        <div class="input-group">
	            <input type="text" class="form-control"
	                   th:field="*{food_id}">
	            <button class="btn btn-secondary btn-custom"
	                    formaction="/food_search"
	                    formmethod="post">
	                Search
	            </button>
	        </div>
	    </div>

	    <div class="mb-3">
	        <label class="form-label">Admin</label>
	        <select th:field="*{emp_id}" class="form-select">
	            <option value="">-- Select Admin --</option>
	            <option th:each="a : ${admins}"
	                    th:value="${a.emp_id}"
	                    th:text="${a.emp_name}">
	            </option>
	        </select>
	    </div>

	    <div class="mb-3">
	        <label class="form-label">Food Name</label>
	        <input type="text" th:field="*{food_name}" class="form-control">
	    </div>

	    <div class="row">
	        <div class="col-6 mb-3">
	            <label class="form-label">Price</label>
	            <input type="number" th:field="*{food_price}" class="form-control">
	        </div>
	        <div class="col-6 mb-3">
	            <label class="form-label">Stock</label>
	            <input type="number" th:field="*{food_stock}" class="form-control">
	        </div>
	    </div>

	    <div class="mb-3">
	        <label class="form-label">Food Image</label>

	        <img th:if="${dto.food_image != null}"
	             th:src="@{'/uploads/food/' + ${dto.food_image}}"
	             style="max-width:200px;border-radius:10px;margin-bottom:10px;">

	        <input type="file"
	               name="pimageFile"
	               class="form-control"
	               accept="image/*"
	               onchange="previewImage(event)">

	        <img id="preview"
	             style="display:none; max-width:200px; margin-top:10px; border-radius:10px;"/>
	    </div>

	    <div class="mb-4">
	        <label class="form-label">Food Details</label>
	        <input type="text" th:field="*{food_detail}" class="form-control">
	    </div>

	    <hr>

	    <button type="submit" class="btn btn-primary w-100">
	        Update
	    </button>

	</form>


<script>
function previewImage(event){
    const img = document.getElementById("preview");
    img.src = URL.createObjectURL(event.target.files[0]);
    img.style.display = "block";
}
</script>

</body>
</html>
