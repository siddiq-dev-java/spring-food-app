<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Food Insert</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
    background: linear-gradient(135deg,#020617,#0f172a,#1e293b);
    min-height:100vh;
    font-family:'Segoe UI';
}

/* NAVBAR */
.navbar-custom{
    background: linear-gradient(90deg,#0891b2,#06b6d4);
    box-shadow:0 4px 14px rgba(0,0,0,.35);
}

/* CARD */
.container-box{
    width:700px;
    max-width:95%;
    margin:40px auto;
}

.card{
    border-radius:18px;
    border:none;
    background:#f8fafc;
    box-shadow:0 20px 55px rgba(0,0,0,.45);
}

/* LABELS */
.form-label{
    font-weight:700;
    font-size:13px;
    color:#1f2937;
    letter-spacing:.5px;
}

/* INPUTS */
.form-control,
.form-select{
    border-radius:12px;
    font-size:14px;
}

/* BUTTONS */
.btn-primary{
    background:linear-gradient(135deg,#1e293b,#334155);
    border:none;
    border-radius:12px;
    font-weight:700;
}
.btn-primary:hover{
    background:linear-gradient(135deg,#020617,#0f172a);
}

/* IMAGE PREVIEW */
#preview{
    max-width:240px;
    margin-top:10px;
    border-radius:12px;
    display:none;
}

/* *****************************
   FOOD LIST SECTION
******************************/
.card-box{
    width:90%;
    margin:40px auto;
    background:white;
    padding:25px;
    border-radius:25px;
    box-shadow:0 25px 70px rgba(0,0,0,.45);
}

.section-title{
    font-weight:900;
    color:#0f172a;
}

.badge-tag{
    background:#14b8a6;
    color:white;
    padding:6px 10px;
    border-radius:8px;
    margin-left:10px;
}

thead{
    background:#0f172a;
    color:white;
}

tr:hover{
    background:#eef9ff !important;
}

.food-img{
    width:90px;
    height:90px;
    border-radius:10px;
    object-fit:cover;
}

.btn-accent{
    background:#14b8a6;
    color:#073a35;
    border:none;
    font-weight:700;
}
.btn-accent:hover{
    background:#22d3b9;
}

</style>
</head>

<body>

<nav class="navbar-custom d-flex justify-content-between align-items-center px-5 py-3">
    <h4 class="text-white fw-bold m-0">üçî FOOD MANAGEMENT</h4>

    <a href="/employee_dash" class="btn btn-dark fw-bold">
        Back
    </a>
</nav>


<div class="container-box">
<div class="card">
<div class="card-body p-4">

    <h5 class="fw-bold text-center mb-3">Add New Food</h5>

    <!-- SUCCESS MESSAGE -->
    <div th:if="${res}" class="alert alert-success text-center fw-bold mb-3">
        <span th:text="${res}"></span>
    </div>

    <!-- FORM -->
    <form method="post" action="/insert" th:object="${dto}" enctype="multipart/form-data">

        <div class="mb-3">
            <label class="form-label">Food ID</label>
            <input type="text" th:field="*{food_id}" class="form-control">
        </div>

        <div class="mb-3">
            <label class="form-label">Admin</label>
            <select th:field="*{emp_id}" class="form-select">
                <option value="">-- Select Admin --</option>
                <option th:each="a : ${admins}"
                        th:value="${a.emp_id}"
                        th:text="${a.emp_name}">
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Food Name</label>
            <input type="text" th:field="*{food_name}" class="form-control">
        </div>

        <div class="row">
            <div class="col-6 mb-3">
                <label class="form-label">Price</label>
                <input type="number" th:field="*{food_price}" class="form-control">
            </div>

            <div class="col-6 mb-3">
                <label class="form-label">Stock</label>
                <input type="number" th:field="*{food_stock}" class="form-control">
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Food Image</label>
            <input type="file"
                   name="pimageFile"
                   class="form-control"
                   accept="image/*"
                   onchange="previewImage(event)">
            <img id="preview">
        </div>

        <div class="mb-4">
            <label class="form-label">Food Details</label>
            <input type="text" th:field="*{food_detail}" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary w-100 py-2">
            Insert
        </button>

        <hr>

        <a href="/food_update" class="btn btn-primary w-100 py-2">
            Food Update
        </a>

    </form>

</div>
</div>
</div>



<!-- FOOD LIST -->
<div class="card-box">

<h4 class="section-title">
    Food List <span class="badge-tag">Available</span>
</h4>

<div class="table-responsive mt-3">
<table class="table table-bordered text-center align-middle">

<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Price</th>
<th>Stock</th>
<th>Image</th>
</tr>
</thead>

<tbody>
<tr th:each="f : ${food_all1}">
<td th:text="${f.food_id}"></td>
<td th:text="${f.food_name}"></td>
<td>‚Çπ <span th:text="${f.food_price}"></span></td>
<td th:text="${f.food_stock}"></td>

<td>
<img th:if ="${f.food_image != null}"
     th:src="@{'/uploads/food/' + ${f.food_image}}"
     class="food-img">
<span th:if ="${f.food_image == null}" style="color:gray">
No Image
</span>
</td>

</tr>
</tbody>

</table>
</div>

</div>


<script>
function previewImage(event){
    const img = document.getElementById("preview");
    img.src = URL.createObjectURL(event.target.files[0]);
    img.style.display = "block";
}
</script>

</body>
</html>
